define("taoEventLog/controller/routes",[],function(){"use strict";return{TaoEventLog:{actions:{index:"controller/TaoEventLog/show"}}}}),define("tpl!taoEventLog/controller/TaoEventLog/show/layout",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+='<div class="log">\n    <section class="log-browser">\n        <div class="filters"></div>\n        <div class="log-table"></div>\n    </section>\n    <section class="event-viewer hidden">\n        \n        <h2>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Event",options):helperMissing.call(depth0,"__","Event",options)))+' #<span class="id"></span></h2>\n        \n        <ul class="list">\n            <li><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Event Name",options):helperMissing.call(depth0,"__","Event Name",options)))+'</strong>: <span class="event_name"></span></li>\n            <li><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Action",options):helperMissing.call(depth0,"__","Action",options)))+'</strong>: <span class="action"></span></li>\n            <li><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"User ID",options):helperMissing.call(depth0,"__","User ID",options)))+'</strong>: <span class="user_id"></span></li>\n            <li><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"User Roles",options):helperMissing.call(depth0,"__","User Roles",options)))+'</strong>: <span class="user_roles"></span></li>\n            <li><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Occurred",options):helperMissing.call(depth0,"__","Occurred",options)))+'</strong>: <span class="occurred"></span></li>\n        </ul>\n\n        <p><strong>'+escapeExpression((helper=helpers.__||depth0&&depth0.__,
options={hash:{},data:data},helper?helper.call(depth0,"Properties",options):helperMissing.call(depth0,"__","Properties",options)))+'</strong>:</p>\n        <div class="code properties"></div>\n    </section>\n</div>\n'})}),define("taoEventLog/controller/TaoEventLog/show",["jquery","i18n","helpers","ui/datatable","tpl!taoEventLog/controller/TaoEventLog/show/layout"],function($,__,helpers,datatable,layoutTpl){"use strict";var listUrl=helpers._url("search","TaoEventLog","taoEventLog");return{start:function(){var $layout=$(layoutTpl()),$eventList=$(".log-browser .log-table",$layout),$eventViewer=$(".event-viewer",$layout),updateEventDetails=function(event){for(var k in event)if(event.hasOwnProperty(k))if("properties"==k){
var json=JSON.parse(JSON.parse(event[k])),str=JSON.stringify(json,void 0,2);$("."+k,$eventViewer).html("<pre>"+str+"</pre>")}else"user_roles"==k?$("."+k,$eventViewer).html(event.roles_list):$("."+k,$eventViewer).html(event[k])};$(".content").append($layout),$eventList.datatable({url:listUrl,filter:!0,rowSelection:!0,model:[{id:"event_name",label:__("Event Name"),sortable:!0,filterable:!0},{id:"action",label:__("Action"),sortable:!0,filterable:!0},{id:"user_id",label:__("User ID"),sortable:!0,filterable:!0},{id:"user_roles",label:__("User Roles"),sortable:!0,filterable:!0,transform:function(roles,row){var list=[""];return roles&&(list=roles.split(",")),row.roles_list=list.join("<br>"),
list.shift()}},{id:"occurred",label:__("Occurred"),sortable:!0,filterable:!0}],listeners:{selected:function(e,event){updateEventDetails(event),$eventViewer.removeClass("hidden")},filter:function(e,options){options.page=1}}}).on("create.datatable",function(){$layout.trigger("dispatched")})}}});
//# sourceMappingURL=controllers.min.js.map